{% extends 'base.html.twig' %}

{% block title %}To-do List - AquaBiome{% endblock %}
{% block page_name %}To do List{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('styles/todolist.css') }}">
{% endblock %}

{% block body %}
<div class="content-area">
    <div class="todo-container">
        <h2 class="todo-title">To do list</h2>

        <div class="todo-section">
            <span class="section-label">A faire</span>
            <div id="list-todo">
                <div class="todo-item" onclick="toggleTask(this)">
                    <div class="custom-checkbox"></div>
                    <span class="todo-text">Nourrir les poissons</span>
                </div>
                <div class="todo-item" onclick="toggleTask(this)">
                    <div class="custom-checkbox"></div>
                    <span class="todo-text">Laver l'aquarium</span>
                </div>
            </div>
        </div>

        <div class="todo-section">
            <span class="section-label">Déjà faite</span>
            <div id="list-done">
                <div class="todo-item done" onclick="toggleTask(this)">
                    <div class="custom-checkbox"></div>
                    <span class="todo-text">Changer les plantes</span>
                </div>
            </div>
        </div>

        <button class="add-item" onclick="addNewTask()">
            <span class="plus-icon">+</span> Rajouter un élément à la liste
        </button>
    </div>
</div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        function toggleTask(element) {
            const todoList = document.getElementById('list-todo');
            const doneList = document.getElementById('list-done');

            if (element.classList.contains('done')) {
                element.classList.remove('done');
                todoList.appendChild(element);
            } else {
                element.classList.add('done');
                doneList.appendChild(element);
            }
        }

        function addNewTask() {
            const taskText = prompt("Quelle tâche souhaitez-vous ajouter ?");
            if (taskText && taskText.trim() !== "") {
                const todoList = document.getElementById('list-todo');
                const newItem = document.createElement('div');
                newItem.className = 'todo-item';
                newItem.onclick = function() { toggleTask(this); };
                newItem.innerHTML = `
                    <div class="custom-checkbox"></div>
                    <span class="todo-text">${taskText}</span>
                `;
                todoList.appendChild(newItem);
            }
        }
    </script>
{% endblock %}