{% extends 'base.html.twig' %}

{% block title %}To-do List - AquaBiome{% endblock %}
{% block page_name %}To do List{% endblock %}

{% block body %}
<style>
    /* On garde tes styles et on ajoute quelques ajustements pour le JS */
    .content-area {
        padding: 20px 15px;
        display: flex;
        justify-content: center;
        flex-grow: 1;
    }

    .todo-container {
        width: 100%;
        max-width: 400px; /* Taille smartphone */
        background: rgba(255, 255, 255, 0.95);
        border-radius: 20px;
        padding: 25px;
        box-shadow: 0 15px 35px rgba(0,0,0,0.15);
        align-self: flex-start;
    }

    h2.todo-title { text-align: center; color: #4834d4; font-size: 1.4rem; margin-bottom: 25px; font-weight: 700; }
    .todo-section { margin-bottom: 25px; }
    .section-label { font-weight: 800; font-size: 1.1rem; margin-bottom: 15px; color: #2d3436; display: block; }

    .todo-item {
        display: flex;
        align-items: center;
        margin-bottom: 15px;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .custom-checkbox {
        width: 22px;
        height: 22px;
        border: 2px solid #7e84cc;
        border-radius: 4px;
        margin-right: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
    }

    .todo-text { font-size: 1.05rem; color: #2d3436; font-weight: 500; }

    /* État coché */
    .todo-item.done .custom-checkbox { background: #7e84cc; border-color: #7e84cc; }
    .todo-item.done .custom-checkbox::after { content: '✓'; color: white; font-weight: bold; font-size: 14px; }
    .todo-item.done .todo-text { color: #a29bfe; text-decoration: line-through; opacity: 0.7; }

    .add-item {
        display: flex;
        align-items: center;
        color: #2d3436;
        text-decoration: none;
        font-weight: 600;
        margin-top: 20px;
        border: none;
        background: none;
        width: 100%;
        cursor: pointer;
        padding: 10px 0;
    }
    .plus-icon { font-size: 1.5rem; margin-right: 10px; }
</style>

<div class="content-area">
    <div class="todo-container">
        <h2 class="todo-title">To do list</h2>

        <div class="todo-section">
            <span class="section-label">A faire</span>
            <div id="list-todo">
                <div class="todo-item" onclick="toggleTask(this)">
                    <div class="custom-checkbox"></div>
                    <span class="todo-text">Nourrir les poissons</span>
                </div>
                <div class="todo-item" onclick="toggleTask(this)">
                    <div class="custom-checkbox"></div>
                    <span class="todo-text">Laver l'aquarium</span>
                </div>
            </div>
        </div>

        <div class="todo-section">
            <span class="section-label">Déjà faite</span>
            <div id="list-done">
                <div class="todo-item done" onclick="toggleTask(this)">
                    <div class="custom-checkbox"></div>
                    <span class="todo-text">Changer les plantes</span>
                </div>
            </div>
        </div>

        <button class="add-item" onclick="addNewTask()">
            <span class="plus-icon">+</span> Rajouter un élément à la liste
        </button>
    </div>
</div>

<script>
    // 1. Fonction pour cocher / décocher et déplacer
    function toggleTask(element) {
        const todoList = document.getElementById('list-todo');
        const doneList = document.getElementById('list-done');

        if (element.classList.contains('done')) {
            // Décocher : enlever la classe et remettre dans "A faire"
            element.classList.remove('done');
            todoList.appendChild(element);
        } else {
            // Cocher : ajouter la classe et mettre dans "Déjà faite"
            element.classList.add('done');
            doneList.appendChild(element);
        }
    }

    // 2. Fonction pour ajouter une nouvelle tâche
    function addNewTask() {
        const taskText = prompt("Quelle tâche souhaitez-vous ajouter ?");
        
        if (taskText && taskText.trim() !== "") {
            const todoList = document.getElementById('list-todo');
            
            // Création de l'élément HTML
            const newItem = document.createElement('div');
            newItem.className = 'todo-item';
            newItem.onclick = function() { toggleTask(this); };
            
            newItem.innerHTML = `
                <div class="custom-checkbox"></div>
                <span class="todo-text">${taskText}</span>
            `;
            
            todoList.appendChild(newItem);
        }
    }
</script>
{% endblock %}